> å…ˆèµåçœ‹ï¼Œå…»æˆä¹ æƒ¯ ğŸŒ¹ æ¬¢è¿å¾®ä¿¡å…³æ³¨ `[Javaç¼–ç¨‹ä¹‹é“] `æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼Œæ²‰æ·€æŠ€æœ¯åˆ†äº«çŸ¥è¯†ã€‚<br>

>åç»­å‘å¸ƒçš„æ–‡ç« ã€æºç ç­‰ï¼Œéƒ½ä¼šæ”¶å½•åˆ°GitHub:`Xxianglei/Alei`ä»“åº“ä¹‹ä¸­ï¼Œæ¬¢è¿å¤§å®¶å‰æ¥è‡ªå–ã€‚

ä»Šå¤©ç”±äºæ—¶é—´å…³ç³»å°±èŠä¸€ç‚¹ç®€å•ï¼Œæˆ‘æ­£åœ¨è®¡åˆ’åæœŸå†™ä½œçš„æ–‡ç« ï¼Œè¿‘æœŸå·¥ä½œä¸Šæ¥è§¦äº†ä¸€äº›æœ‰æ„æ€çš„ä¸œè¥¿ï¼Œåé¢ä¼šè·Ÿå¤§å®¶å” å” ã€‚å¦‚æœä½ æœ‰æ„è§æˆ–å»ºè®®æ¬¢è¿ç•™è¨€ã€‚ğŸ“«<br>

`***æ–‡æœ«æœ‰æƒŠå–œ***` ğŸ

# List é›†åˆ
---
- Listé›†åˆä»£è¡¨ä¸€ä¸ª**æœ‰åºé›†åˆ**ï¼Œé›†åˆä¸­æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ã€‚Listé›†åˆå…è®¸ä½¿ç”¨é‡å¤å…ƒç´ ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•æ¥è®¿é—®æŒ‡å®šä½ç½®çš„é›†åˆå…ƒç´ ã€‚
- Listæ¥å£ç»§æ‰¿äºCollectionæ¥å£ï¼Œå®ƒå¯ä»¥å®šä¹‰ä¸€ä¸ªå…è®¸é‡å¤çš„æœ‰åºé›†åˆã€‚å› ä¸ºListä¸­çš„å…ƒç´ æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ç´¢å¼•ï¼ˆå…ƒç´ åœ¨Listä¸­çš„ä½ç½®ï¼Œç±»ä¼¼äºæ•°ç»„ä¸‹æ ‡ï¼‰æ¥è®¿é—®Listä¸­çš„å…ƒç´ ï¼Œè¿™ç±»ä¼¼äºJavaçš„**æ•°ç»„**ã€‚
- Listæ¥å£ä¸ºCollectionç›´æ¥æ¥å£ã€‚Listæ‰€ä»£è¡¨çš„æ˜¯æœ‰åºçš„Collectionï¼Œå³å®ƒç”¨æŸç§ç‰¹å®šçš„æ’å…¥é¡ºåºæ¥ç»´æŠ¤å…ƒç´ é¡ºåºã€‚ç”¨æˆ·å¯ä»¥å¯¹åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„æ’å…¥ä½ç½®è¿›è¡Œç²¾ç¡®åœ°æ§åˆ¶ï¼ŒåŒæ—¶å¯ä»¥æ ¹æ®å…ƒç´ çš„æ•´æ•°ç´¢å¼•ï¼ˆåœ¨åˆ—è¡¨ä¸­çš„ä½ç½®ï¼‰è®¿é—®å…ƒç´ ï¼Œå¹¶æœç´¢åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚å®ç°Listæ¥å£çš„é›†åˆä¸»è¦æœ‰ï¼š**ArrayListã€LinkedListã€Vectorã€Stack**ã€‚

æ¥ä¸‹æ¥å…ˆå€Ÿé‰´ä¸€ä¸‹æºç ï¼Œæˆ‘ä»¬ç…§ç€æºç çš„æ€è·¯ï¼Œæ¥å†™ä¸€ä¸ªè‡ªå·±çš„ArrayListé›†åˆã€‚

åœ¨å¼€å§‹çœ‹æºç ä¹‹å‰æˆ‘éœ€è¦è¡¥å……è¯´æ˜ä¸€ä¸‹**æ•°ç»„æ‰©å®¹æŠ€æœ¯**

- Arrays.copyOfï¼ˆObject[] original, int newLengthï¼‰
åŠŸèƒ½æ˜¯å®ç°æ•°ç»„çš„å¤åˆ¶ï¼Œè¿”å›å¤åˆ¶åçš„æ•°ç»„ã€‚å‚æ•°æ˜¯è¢«å¤åˆ¶çš„**æ•°ç»„**å’Œå¤åˆ¶çš„**é•¿åº¦**ã€‚è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„å°±ç­‰äºæ˜¯æŠŠæ•°ç»„æŒ‰**æ–°**çš„å¤§å°ç»™é‡æ–°èµ‹å€¼äº†ä¸€ä»½è¿”å›äº†ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚

- System.arraycopy(src, srcPos, dest, destPos, length);
å¦‚æœæ˜¯æ•°ç»„æ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆä½¿ç”¨System.arraycopyä¼šæ¯”è¾ƒæœ‰ä¼˜åŠ¿ï¼Œå› ä¸ºå…¶ä½¿ç”¨çš„æ˜¯å†…å­˜å¤åˆ¶ï¼Œçœå»äº†å¤§é‡çš„æ•°ç»„å¯»å€è®¿é—®ç­‰æ—¶é—´

å‚æ•°è§£é‡Šï¼š

- src:æºæ•°ç»„ï¼›	
- srcPos:æºæ•°ç»„è¦å¤åˆ¶çš„èµ·å§‹ä½ç½®ï¼›
- dest:ç›®çš„æ•°ç»„ï¼›
- destPos:ç›®çš„æ•°ç»„æ”¾ç½®çš„èµ·å§‹ä½ç½®ï¼›	length:å¤åˆ¶çš„é•¿åº¦ã€‚

æ³¨æ„ï¼šsrc and destéƒ½å¿…é¡»æ˜¯åŒç±»å‹æˆ–è€…å¯ä»¥è¿›è¡Œè½¬æ¢ç±»å‹çš„æ•°ç»„ï¼

**åŸç†å›¾è§£**ï¼š
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190306133702240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE1ODMzMTY=,size_16,color_FFFFFF,t_70)
## ArrayList æºç 
---
1. æƒ³æƒ³æˆ‘ä»¬éœ€è¦æ‰‹å†™ä¸€ä¸ªArrayListã€éœ€è¦çœ‹ç‚¹ä»€ä¹ˆï¼Ÿæ„é€ æ–¹æ³•ï¼Ÿ

```java
    /**
     * Default initial capacity. 
     */
    private static final int DEFAULT_CAPACITY = 10;
      /**
     * Shared empty array instance used for empty instances.
     */
    private static final Object[] EMPTY_ELEMENTDATA = {};
    /**
     * Constructs an empty list with an initial capacity of ten.
     */
    public ArrayList() {
        this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;
    }

```
å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤æ— å‚æ—¶ï¼Œæ•°ç»„çš„åˆå§‹å®¹é‡å¤§å°æ˜¯10.

2. å¸¦å‚æ„é€ æ–¹æ³•
```java
//	å¸¦å‚æ„é€ æ–¹æ³•
    public ArrayList(int initialCapacity) {
        if (initialCapacity > 0) {
            this.elementData = new Object[initialCapacity];
        } else if (initialCapacity == 0) {
            this.elementData = EMPTY_ELEMENTDATA;
        } else {
            throw new IllegalArgumentException("Illegal Capacity: "+
                                               initialCapacity);
        }
    }
```
3. çœ‹çœ‹æ•°æ®æ·»åŠ æ–¹æ³•
```java
   /**
     * Appends the specified element to the end of this list.
     *
     * @param e element to be appended to this list
     * @return <tt>true</tt> (as specified by {@link Collection#add})
     */
    public boolean add(E e) {
        ensureCapacityInternal(size + 1);  // Increments modCount!!
        elementData[size++] = e;
        return true;
    }
    
     private void ensureCapacityInternal(int minCapacity) {
        if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {
            minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);
        }

        ensureExplicitCapacity(minCapacity);
    }

    private void ensureExplicitCapacity(int minCapacity) {
        modCount++;

        // overflow-conscious code
        if (minCapacity - elementData.length > 0)
            grow(minCapacity);
    }
    //  æ•°æ®æ‰©å®¹ è¿™é‡Œç”¨äº†ä¸€ä¸ªä½è¿ç®—
     private void grow(int minCapacity) {
        // overflow-conscious code
        int oldCapacity = elementData.length;
        int newCapacity = oldCapacity + (oldCapacity >> 1);
        if (newCapacity - minCapacity < 0)
            newCapacity = minCapacity;
        if (newCapacity - MAX_ARRAY_SIZE > 0)
            newCapacity = hugeCapacity(minCapacity);
        // minCapacity is usually close to size, so this is a win:
        elementData = Arrays.copyOf(elementData, newCapacity);
    }

```
çœ‹åˆ°è¿™é‡Œä½ åŸºæœ¬ä¸Šä¹Ÿæ¸…æ¥šäº†ï¼ŒArrayListçš„æ‰©å®¹å€æ•°æ˜¯1.5å€ã€‚æ¯”å¦‚oldCapacity=2ï¼ŒoldCapacity + (oldCapacity >> 1)æ‰§è¡Œåå°±ç­‰äº3ã€‚

è¡¥å……è¯´æ˜ï¼š**ä½è¿ç®—** 
-  <<(å‘å·¦ä½ç§») é’ˆå¯¹äºŒè¿›åˆ¶ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶åå‘å·¦ç§»åŠ¨1ä½ï¼Œåé¢ç”¨0è¡¥é½
- \>>(å‘å³ä½ç§») é’ˆå¯¹äºŒè¿›åˆ¶ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶åå‘å³ç§»åŠ¨1ä½

4. çœ‹çœ‹æŒ‰ç´¢å¼•æ·»åŠ ï¼Œç±»ä¼¼äºæ’å…¥å§
 ```java
   public void add(int index, E element) {
        rangeCheckForAdd(index);

        ensureCapacityInternal(size + 1);  // Increments modCount!!
        System.arraycopy(elementData, index, elementData, index + 1,
                         size - index);
        elementData[index] = element;
        size++;
    }
 ```
å…¶å®å’Œæ·»åŠ æ²¡æœ‰å¤šå¤§çš„ä¸åŒï¼Œå°±æ˜¯ç”¨åˆ°äº†æ•°ç»„çš„èµ‹å€¼ï¼Œå¦‚ä¸‹å›¾ åŸsize=5ï¼Œç°åœ¨Fè¦æ’å…¥åˆ°ä¸‹æ ‡ä¸º2çš„ä½ç½®ï¼Œæ‰€ä»¥ System.arraycopy(elementData, 2, elementData, index + 1,  5 - 2); åç§»åé¢çš„ä¸‰ä½å…ƒç´ ã€‚
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190306135205499.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE1ODMzMTY=,size_16,color_FFFFFF,t_70)
5. å†çœ‹çœ‹removeæ–¹æ³•

1. æŒ‰ç´¢å¼•åˆ é™¤ã€‚è¿™ä¸ªå¾ˆç®€å•ï¼ŒåŸç†åŒæ·»åŠ ï¼Œåªä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœåˆ é™¤çš„æ˜¯æœ€åä¸€ä½è¦è¿›è¡Œä¸€ä¸ªåˆ¤æ–­ï¼Œå°±ä¸éœ€è¦è¿›è¡Œæ•°ç»„èµ‹å€¼ï¼Œç›´æ¥ç½®ç©ºå³å¯ï¼

```java
    public E remove(int index) {
        rangeCheck(index);

        modCount++;
        E oldValue = elementData(index);

        int numMoved = size - index - 1;
        if (numMoved > 0)
            System.arraycopy(elementData, index+1, elementData, index,
                             numMoved);
        elementData[--size] = null; // clear to let GC do its work

        return oldValue;
    }
```

2.æŒ‰å¯¹è±¡åˆ é™¤. è¿™ä¸ªç›¸ä¿¡å¤§å®¶éƒ½èƒ½çœ‹æ‡‚
	
```java
 public boolean remove(Object o) {
        if (o == null) {
            for (int index = 0; index < size; index++)
                if (elementData[index] == null) {
                    fastRemove(index);
                    return true;
                }
        } else {
            for (int index = 0; index < size; index++)
                if (o.equals(elementData[index])) {
                    fastRemove(index);
                    return true;
                }
        }
        return false;
    }
```

å¥½äº†ï¼Œæºç åŸºç¡€çš„å†…å®¹å°±çœ‹å®Œå’¯ã€‚æ¥ä¸‹æ¥å°±æ˜¯è§è¯å¥‡è¿¹çš„æ—¶åˆ»äº†ï¼

## æ‰‹å†™ ArrayList

è¯´æ˜ä»¥åŠè¢«æˆ‘å†™åœ¨æ³¨é‡Šé‡Œäº†ï¼Œæ²¡æœ‰ç‰¹åˆ«ä¹‹å¤„æˆ‘å°±ä¸åšå¤šä½™çš„æç¤ºäº†ã€‚

```java
package com.xianglei.Utils;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class ExtArrayList<E> implements ExtList<E> {
	// ArrayListåº•å±‚é‡‡ç”¨æ•°ç»„å­˜æ”¾
	private Object[] elementData;
	// é»˜è®¤æ•°ç»„å®¹é‡
	private static final int DEFAULT_CAPACITY = 10;
	// è®°å½•å®é™…ArrayListå¤§å° åˆå§‹ä¸º0
	private int size;

	// é»˜è®¤å®¹é‡å¤§å°ä¸º10
	public ExtArrayList() {
		this(DEFAULT_CAPACITY);
	}

	// æ„é€ æ–¹æ³•æŒ‡å®šæ•°ç»„å®¹é‡
	public ExtArrayList(int defaultCapacity) {

		if (defaultCapacity < 0) {
			throw new IllegalArgumentException("åˆå§‹å®¹é‡ä¸èƒ½å°äº0");
		}
		elementData = new Object[defaultCapacity];

	}

	public void add(E e) {
		// 1.åˆ¤æ–­å®é™…å­˜æ”¾çš„æ•°æ®å®¹é‡æ˜¯å¦å¤§äºelementDataå®¹é‡
		ensureExplicitCapacity(size + 1); // åˆ¤æ–­å®é™…å­˜å‚¨çš„æ•°æ®æ‰€å å®¹é‡å¤§å°
		// ä»ä¸‹æ ‡0å¼€å§‹å­˜å‚¨
		elementData[size++] = e;

	}

	// int minCapacity æœ€å½“å‰size+1 æœ€å°çš„æ‰©å®¹é‡
	private void ensureExplicitCapacity(int minCapacity) {
		// ä¸€æ—¦ç­‰äºæ•°ç»„å®¹é‡å¤§å°å°±è¿›è¡Œæ‰©å®¹
		if (size == elementData.length) {
			// åŸæ¥æœ¬èº«elementDataå®¹é‡å¤§å° 2
			int oldCapacity = elementData.length;
			// æ–°æ•°æ®å®¹é‡å¤§å° (oldCapacity >> 1)=oldCapacity/
			// <<(å‘å·¦ä½ç§») é’ˆå¯¹äºŒè¿›åˆ¶ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶åå‘å·¦ç§»åŠ¨1ä½ï¼Œåé¢ç”¨0è¡¥é½
			// >>(å‘å³ä½ç§») é’ˆå¯¹äºŒè¿›åˆ¶ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶åå‘å³ç§»åŠ¨1ä½ï¼Œ
			/**
			 * å¦‚æœåˆå§‹æ˜¯1çš„è¯ ç›®å‰æ‰©å®¹å newCapacityè¿˜æ˜¯1
			 */
			int newCapacity = oldCapacity + (oldCapacity >> 1);// (2+2/2)=3
			// å¦‚æœåˆå§‹å®¹é‡ä¸º1çš„æ—¶å€™,é‚£ä¹ˆä»–æ‰©å®¹çš„å¤§å°ä¸ºå¤šå°‘å‘¢ï¼Ÿ
			if (newCapacity - minCapacity < 0)
				newCapacity = minCapacity; // æœ€å°‘ä¿è¯å®¹é‡å’ŒminCapacityä¸€æ ·
			// å°†è€æ•°ç»„çš„å€¼èµ‹å€¼åˆ°æ–°æ•°ç»„é‡Œé¢å»
			elementData = Arrays.copyOf(elementData, newCapacity);
		}
	}
	// æŒ‰ä¸‹æ ‡åˆ é™¤
	public Object remove(int index) {
		rangeCheck(index);
		Object object = get(index);
		int numMoved;
		numMoved = size - index - 1;
		if (numMoved > 0) {
			System.arraycopy(elementData, index + 1, elementData, index, numMoved);
		}
		elementData[--size] = null;
		return object;
	}
	
	public boolean removeObj(E object) {
		for (int i = 0; i < elementData.length; i++) {
			Object element = elementData[i];
			if (element.equals(object)) {
				remove(i);
				return true;
			}
		}
		return false;
	}
	

	public void insert(int index, E e) {
		// 1.åˆ¤æ–­å®é™…å­˜æ”¾çš„æ•°æ®å®¹é‡æ˜¯å¦å¤§äºelementDataå®¹é‡
		ensureExplicitCapacity(size + 1);
		System.arraycopy(elementData, index, elementData, index + 1, size - index);
		elementData[index] = e;
		size++;
	}

	private void rangeCheck(int index) {
		if (index >= size)
			throw new IndexOutOfBoundsException("è¶Šç•Œå•¦!");
	}

	public int getSize() {
		return size;
	}

	// ä½¿ç”¨ä¸‹æ ‡è·å–æ•°ç»„å…ƒç´ 
	public Object get(int index) {
		rangeCheck(index);
		return elementData[index];
	}
	
	public boolean remove(E object) {
		// TODO Auto-generated method stub
		return false;
	}
}

```

åšä¸ªç®€å•çš„ä¼˜åŒ–ï¼Œä½¿ç”¨æ³›å‹æ¥å£ã€‚

```java
public interface ExtList<E>  {
	public void add(E object);

	public void insert(int index, E object);

	public Object remove(int index);

	public boolean removeObj(E object);

	public int getSize();

	public Object get(int index);
	
}
```

å¤§å®¶éƒ½å¬è¯´è¿‡ArrayListæ˜¯**çº¿ç¨‹ä¸å®‰å…¨**çš„ï¼Œæˆ‘æƒ³é€šè¿‡æºç å¤§å®¶å·²ç»çŸ¥é“ä¸ºä»€ä¹ˆä¸å®‰å…¨äº†ã€‚æ²¡æœ‰**synchronized**å…³é”®å­—ã€‚ä¸ä¹‹ç›¸åçš„æœ‰ä¸€ä¸ªVectoré›†åˆï¼Œä»–å°±æ˜¯**çº¿ç¨‹å®‰å…¨**çš„ã€‚ä»–ä»¬ä¿©çš„æºç å¾ˆç›¸ä¼¼ï¼ŒVectoræ— éåªæ˜¯åŠ ä¸Šäº†é”synchronizedã€‚

- Vectorçš„addæ–¹æ³•ï¼š
```java
  public synchronized boolean add(E e) {
        modCount++;
        ensureCapacityHelper(elementCount + 1);
        elementData[elementCount++] = e;
        return true;
    }
```
----
## æ€»ç»“
----
Vectoræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯**æ€§èƒ½**æ¯”ArrayListè¦**ä½**ã€‚

ArrayListï¼ŒVectorä¸»è¦åŒºåˆ«ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š 
- Vectoræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæºç ä¸­çš„æ–¹æ³•éƒ½ç”¨synchronizedä¿®é¥°ï¼Œè€ŒArrayListä¸æ˜¯ã€‚Vectoræ•ˆç‡æ— æ³•å’ŒArrayListç›¸æ¯”ã€‚ 
- ArrayListå’ŒVectoréƒ½é‡‡ç”¨**çº¿æ€§è¿ç»­å­˜å‚¨ç©ºé—´**ï¼Œå½“å­˜å‚¨ç©ºé—´ä¸è¶³çš„æ—¶å€™ï¼ŒArrayListé»˜è®¤å¢åŠ ä¸ºåŸæ¥çš„50%ï¼ŒVectoré»˜è®¤å¢åŠ ä¸ºåŸæ¥çš„ä¸€å€ã€‚ **ä¹Ÿå°±æ˜¯å¸¸çŸ¥çš„1.5 å’Œ 2 å€**
- Vectorå¯ä»¥è®¾ç½®capacityIncrementï¼Œè€ŒArrayListä¸å¯ä»¥ï¼Œä»å­—é¢ç†è§£å°±æ˜¯capacityå®¹é‡ï¼ŒIncrementå¢åŠ ï¼Œå®¹é‡å¢é•¿çš„å‚æ•°ã€‚
- ArrayList æŸ¥è¯¢å¿«ï¼Œä¿®æ”¹ã€åˆ é™¤ã€æ’å…¥æ…¢ã€‚å› ä¸ºé™¤äº†æŸ¥è¯¢æ“ä½œå…¶ä»–éƒ½æ¶‰åŠå¤§é‡çš„å…ƒç´ ç§»åŠ¨ã€‚

---

è¯¥æ–‡ç« è½¬è‡³æˆ‘çš„ [CSDNåšå®¢](https://blog.csdn.net/u011583316)ï¼Œè¿‘æœŸæˆ‘å·²ç»åœ¨`æ˜é‡‘`æ³¨å†Œäº†ä¸€ä¸ªæ–°åšå®¢è´¦å· [çˆ±å” å—‘çš„é˜¿ç£Š](https://juejin.im/user/5985a384f265da3e0f119974) ,CSDNçš„åšå®¢å·æˆ‘ä¸ä¼šå†æ›´æ–°äº†ï¼Œæ¬¢è¿å¤§å®¶æ¥æ˜é‡‘æºœè¾¾æºœè¾¾---ä¸€ä¸ªå…¨æ˜¯`å¥½æ–‡`çš„åœ°æ–¹ã€‚